###################################################################
# This processing chain is for testing visualization
# Specifically, EEG using fixed windows, with coords & downsampling
#
###################################################################
global:
  num_channels: 59  # how many outputs to produce (default to device if specified, or 1 if not)

modules:
###################################################################
  - id: "origin1"
    class: "ModuleSignalGenerator"
    settings:
      debug: False
      sampling_rate: 2  # Hz (samples per second)
      range: [-1000,4000]   # range of integers, (i.e. [1,10])
      pattern: "rand"   # rand | sine | files
      frequency: 20  # Hz (only used with sine)
      files: ["/Users/odrulea/Documents/docs/gradschool/BCI/datasets/BCI IV Competition/dataset1/asc-100/BCICIV_dataset1_100Hz_asc/BCICIV_calib_ds1a_cnt.txt"]
    outputs:
      data:
        message_queues: ["eeg_save"]
        message_type: "TIME_SAMPLE"
        data_type: "RAW_DATA"
        buffer_size: 0

###################################################################
  - id: "viz1"
    class: "ModuleRecord"
    settings:
      debug: True
    inputs:
      data:
        name: "eeg_save"
        message_type: "TIME_SAMPLE"
        data_type: "RAW_DATA"
#        message_type: "MATRIX"
#        data_type: "RAW_DATA"
    outputs:
      data:
        file: "/Users/odrulea/tmp/foo.txt"
        file_write_mode: "w"
        #message_queues: "window"
        #message_type: "MATRIX"
        #data_type: "RAW_DATA"
        buffer_size: 0

####################################################################
#  - id: "viz1"
#    class: "ModuleWindows"
#    settings:
#      # samples_per_window:50, window_overlap:21 = 12fps
#      debug: False
#      samples_per_window: 20
#      window_overlap: 0
#    inputs:
#      data:
#        name: "eeg"
#        message_type: "TIME_SAMPLE"
#        data_type: "RAW_DATA"
#    outputs:
#      data:
#        message_queues: "window"
#        message_type: "MATRIX"
#        data_type: "RAW_DATA"
#        buffer_size: 0

######################################################################
#  - id: "viz2"
#    class: "ModuleConvert"
#    settings:
#      debug: False
#    inputs:
#      data:
#        name: "window"
#        message_type: "MATRIX"
#        data_type: "RAW_DATA"
#    outputs:
#      data:
#        message_queues: "viz_eeg"
#        message_type: "MATRIX"
#        data_type: "RAW_COORDS"
#        buffer_size: 0
#
########################################################################
##  - id: "viz3"
##    class: "ModuleDownsample"
##    settings:
##      formula: "lttb"
##      percent: 50      # percentage of original data size to downsample to
##      debug: False
##    inputs:
##      data:
##        name: "viz_eeg"
##        message_type: "MATRIX"
##        data_type: "RAW_COORDS"
##    outputs:
##      data:
##        message_queues: "viz_eeg_downsampled"
##        message_type: "MATRIX"
##        data_type: "RAW_COORDS"
##        buffer_size: 0
